<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Demo Day: Using synthimpute for data fusion</h1><p class="page-description">The synthimpute Python package fuses and synthesizes economic datasets with machine learning.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-12-08T00:00:00-06:00" itemprop="datePublished">
        Dec 8, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Max Ghenis</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#demo-days">demo-days</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#python">python</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#data-fusion">data-fusion</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#synthimpute">synthimpute</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
</ul>
<center>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/e_sk-_yWamY" frameborder="0" allowfullscreen=""></iframe>
</center>

<hr>

<p>Suppose a policy analyst sought to estimate the impact of a policy that changed income tax rates and benefit rules while also adding a progressive wealth tax.
The standard approach is to use a <em>microsimulation</em> model, where the rules are programmed as code, and then to run that program over a representative sample of households.
Unfortunately, no single US government survey captures all the households characteristics needed to analyze this policy; in particular, the reliable tax and benefit information lies in surveys like the Current Population Survey (CPS), while wealth lies in the Survey of Consumer Finances (SCF).</p>

<p>Assuming the analyst wanted to start with the CPS, they have several options to estimate wealth for households to levy the progressive wealth tax.
Two typical approaches include:</p>
<ol>
  <li>Linear regression, predicting wealth from other household characteristics common to the CPS and SCF.</li>
  <li>Matching, in which each CPS household is matched with the most similar household in the SCF.</li>
</ol>

<p>Neither of these approaches, however, aim to estimate the <em>distribution</em> of wealth conditional on other characteristics.
Linear regression explicitly estimates the mean prediction, but that could miss the tails of wealth from whom most of the wealth tax revenue will be collected.</p>

<p>Instead, the analyst could apply <em>quantile regression</em> to estimate the distribution of wealth conditional on other characteristics, and then measure the effectiveness of the estimation using <em>quantile loss</em>.</p>

<p>In this Demo Day, I present the concepts of microsimulation, imputation, and quantile loss to motivate the <code class="language-plaintext highlighter-rouge">synthimpute</code> Python package I’ve developed with my PolicyEngine colleague Nikhil Woodruff.
In an experiment predicting wealth on a holdout set from the SCF, my former colleague Deepak Singh and I found that random forests significantly outperform OLS and matching for quantile regression, and this is the approach applied in <code class="language-plaintext highlighter-rouge">synthimpute</code> for both data fusion and data synthesis.
The <code class="language-plaintext highlighter-rouge">synthimpute</code> API will be familiar to users of <code class="language-plaintext highlighter-rouge">scikit-learn</code> and <code class="language-plaintext highlighter-rouge">statsmodels</code> , with the difference being that <code class="language-plaintext highlighter-rouge">synthimpute</code> ‘s <code class="language-plaintext highlighter-rouge">rf_impute</code> function returns a random value from the predicted distribution; it can also skew the predictions to meet a target total.</p>

<p>We’ve used <code class="language-plaintext highlighter-rouge">synthimpute</code> to fuse data for research reports at the <a href="https://ubicenter.org">UBI Center</a> and to enhance the <a href="https://policyengine.org">PolicyEngine</a> web app for UK tax and benefit simulation, and we welcome new users and contributors.
Feel free to explore the repository or contact me with questions at <a href="mailto:max@policyengine.org">max@policyengine.org</a>.</p>

<p>Resources:</p>
<ul>
  <li><a href="https://github.com/PolicyEngine/synthimpute"><code class="language-plaintext highlighter-rouge">synthimpute</code> package on GitHub</a></li>
  <li><a href="https://docs.google.com/presentation/d/1Hw0zIkbnXZluW8ntjbw_NXryRvjVcg6DDp-btkXXV_o">Presentation slides</a></li>
  <li>
<a href="https://www.ubicenter.org/uk-lvt">UBI Center report on land value taxation in the UK</a>, using <code class="language-plaintext highlighter-rouge">synthimpute</code> to impute land value from the UK Wealth and Assets Survey to the Family Resources Survey</li>
  <li>
<a href="http://policyengine.org/uk/population-impact?carbon_tax=100">PolicyEngine UK carbon tax example</a>, using <code class="language-plaintext highlighter-rouge">synthimpute</code> to impute carbon emissions from the Living Costs and Food Survey to the Family Resources Survey</li>
  <li>
<a href="https://colab.research.google.com/drive/1E8F7S1Uvfw_3PmpS226Sl1LWV5NBi0CE">Notebook comparing random forests to matching and other techniques</a> using a holdout set from the US Survey of Consumer Finances</li>
  <li>
<a href="https://towardsdatascience.com/quantile-regression-from-linear-models-to-trees-to-deep-learning-af3738b527c3">My blog post on quantile regression for Towards Data Science</a>, which laid the groundwork for <code class="language-plaintext highlighter-rouge">synthimpute</code>
</li>
</ul>

  </div><a class="u-url" href="/demo-day-synthimpute" hidden></a>
</article>
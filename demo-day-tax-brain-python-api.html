<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Demo Day: Using the TaxBrain Python API</h1><p class="page-description">A programmatic interface to compute the impact of tax reform.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-06-14T00:00:00-05:00" itemprop="datePublished">
        Jun 14, 2021
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Anderson Frailey</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#demo-days">demo-days</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#individual-income-tax">individual-income-tax</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#tax-brain">tax-brain</a>
        &nbsp;
      
        <a class="category-tags-link" href="/categories/#tax-calculator">tax-calculator</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
</ul><hr>

<center>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/HXN2TrOvXn0" frameborder="0" allowfullscreen=""></iframe>
</center>

<hr>

<p>The TaxBrain project was primarily created to serve as the backend of the <a href="https://www.compute.studio/PSLmodels/Tax-Brain/">Tax-Brain web-application</a>.
But at its core, TaxBrain is a Python package that greatly simplifies tax policy analysis.
For this PSL Demo-Day, I demonstrated TaxBrain’s capabilities as a standalone package, and how to use it to produce high-level summaries of the revenue impacts of proposed tax policies.
The Jupyter Notebook from the presentation can be found <a href="https://gist.github.com/andersonfrailey/bb8ac6db609bf0146ef23d1d35d32334">here</a>.</p>

<p>TaxBrain’s Python API allows you to run a full analysis of income tax policies in just three lines of code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">taxbrain</span> <span class="kn">import</span> <span class="n">TaxBrain</span>

<span class="n">tb</span> <span class="o">=</span> <span class="n">TaxBrain</span><span class="p">(</span><span class="n">START_YEAR</span><span class="p">,</span> <span class="n">END_YEAR</span><span class="p">,</span> <span class="n">use_cps</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">reform</span><span class="o">=</span><span class="n">REFORM_POLICY</span><span class="p">)</span>
<span class="n">tb</span><span class="p">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">START_YEAR</code> and <code class="language-plaintext highlighter-rouge">END_YEAR</code> are the first and last years, respectively, of the analysis; <code class="language-plaintext highlighter-rouge">use_cps</code> is a boolean indicator that you want to use the CPS-based microdata file prepared for use with Tax-Calculator; and <code class="language-plaintext highlighter-rouge">REFORM_POLICY</code> is either a JSON file or Python dictionary that specifies a reform suitable for Tax-Calculator.
The forthcoming release of TaxBrain will also include a feature that allows you to perform a stacked revenue analysis as well.
The inspiration for this feature was presented by Jason DeBacker in a <a href="http://blog.pslmodels.org/demo-day-11-stacked-revenue-estimates">previous demo-day</a>.</p>

<p>Once TaxBrain has been run, there are a number of methods and functions included in the package to create tables and plots to summarize the results.
I used the <a href="https://github.com/PSLmodels/examples/blob/main/psl_examples/taxcalc/Biden2020.json">Biden 2020 campaign proposal</a> in the demo and the resulting figures are below.
The first is a “volcano plot” that makes it easy to see the magnitude of the change in tax liability individuals across the income distribution face.
Each dot represents a tax unit, and the x and y variables can be customized based on the user’s needs.</p>

<p><img src="../images/biden_volcano.png" alt=""></p>

<p>The second gives a higher-level look at how taxes change in each income bin.
It breaks down what percentage of each income bin faces a tax increase or decrease, and the size of that change.</p>

<p><img src="../images/biden_dist_fig.png" alt=""></p>

<p>The final plot shown in the demo simply shows tax liabilities by year over the budget window.</p>

<p><img src="../images/biden_revenue.png" alt=""></p>

<p>The last feature I showed was TaxBrain’s automated reports. 
TaxBrain uses saved results and an included report template to write a report summarizing the findings of your simulation.
The reports include tables and figures similar to what you may find in similar write ups by the Joint Committee on Taxation or Tax Policy Center including a summary of significant changes caused by the reform, and all you need is one line of code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">report</span><span class="p">(</span><span class="n">tb</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Biden Proposal'</span><span class="p">,</span> <span class="n">outdir</span><span class="o">=</span><span class="s">'biden'</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">'Anderson Frailey'</span><span class="p">)</span>
</code></pre></div></div>

<p>The above code will save a PDF copy of the report in a directory called <code class="language-plaintext highlighter-rouge">biden</code> along with PNG files for each of the graphs created and the raw Markdown text used for the report, which you can then edit as needed if you would like to add content to the report that is not already included.
Screenshots of the default report are included below.</p>

<p><img src="../images/tb_report1.png" alt="">
<img src="../images/tb_report2.png" alt="">
<img src="../images/tb_report3.png" alt="">
<img src="../images/tb_report4.png" alt="">
<img src="../images/tb_report5.png" alt=""></p>

<p>There are of course downsides to using TaxBrain instead of Tax-Calculator directly.
Specifically, it’s more difficult, and sometimes impossible, to perform custom  tasks like modeling a feature of the tax code that hasn’t been added to Tax-Calculator yet or advanced work with marginal tax rates.
But for day-to-day tax modeling, the TaxBrain Python package can significantly simply any workflow.</p>

<p>Resources:</p>
<ul>
  <li><a href="https://github.com/PSLmodels/Tax-Brain">Tax-Brain GitHub repo</a></li>
  <li><a href="http://taxbrain.pslmodels.org/content/intro.html">Tax-Brain Documentation</a></li>
</ul>

  </div><a class="u-url" href="/demo-day-tax-brain-python-api" hidden></a>
</article>